#!/usr/bin/env ruby
require File.dirname(__FILE__) + '/../lib/moneypenny'
require 'logger'
require 'yaml'

subdomain = ARGV[0]
room      = ARGV[1]
api_token = ARGV[2]

input = ARGV.shift
case
when input == 'sample_config'
  puts File.read( File.dirname(__FILE__) + "/../examples/sample_config.yml" )
  exit
when input && File.exists?( input )
  config = YAML::load_file( input )
else
  puts "./moneypenny (path_to_config_file|sample_config)"
  exit
end

logger       = Logger.new STDOUT
logger.level = Logger::DEBUG
moneypenny   = Moneypenny::Moneypenny.new config, logger
moneypenny.say 'Hello, Moneypenny here at your service.'
moneypenny.listen!
